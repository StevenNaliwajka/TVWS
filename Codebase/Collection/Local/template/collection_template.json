{
  "meta": {
    "schema_name": "TVWS_LocalCollect_UserManagedConfig",
    "schema_version": "1.0.0"
  },
  "session": {
    "runs": 100,
    "run_dir_prefix": "run_",
    "session_dir_prefix": "collect_",
    "timestamp_format": "%Y-%m-%dT%H-%M-%S_%f",
    "overwrite_existing": false,
    "inter_run_delay_s": 0.0,
    "__comment_inter_run_delay_s": "Delay between runs (after files close) if you want to cool hardware or avoid USB contention."
  },
  "devices": {
    "mapping_mode": "serial",
    "__comment_mapping_mode": "serial|index. 'serial' is strongly recommended so roles don't swap when USB enumeration changes.",
    "tx": {
      "serial": "0000000000000000xxxxxxxxxxxxxxxx",
      "index": null
    },
    "rx_1": {
      "serial": "0000000000000000xxxxxxxxxxxxxxxx",
      "index": null
    },
    "rx_2": {
      "serial": "0000000000000000xxxxxxxxxxxxxxxx",
      "index": null
    }
  },
  "rf": {
    "center_freq_hz": 491000000,
    "sample_rate_hz": 20000000,
    "baseband_hz": 0,
    "__comment_baseband_hz": "Optional: set if your code distinguishes center frequency vs baseband offset.",
    "rx_bandwidth_hz": null,
    "__comment_rx_bandwidth_hz": "Optional: set to constrain analog filter bandwidth if your CLI supports it."
  },
  "tx": {
    "enabled": true,
    "amp_enable": true,
    "__comment_amp_enable": "HackRF 'amp' (0/1). Requires appropriate hardware/antenna conditions.",
    "txvga_db": 44,
    "lna_db": 0,
    "vga_db": 0,
    "__comment_gains": "If your TX path only uses txvga, you can ignore lna/vga here.",
    "repeat": true,
    "duration_s": 1.0,
    "__comment_duration_s": "If transmitting a file, this is how long to transmit per run (or omit if file length determines duration)."
  },
  "rx_1": {
    "enabled": true,
    "lna_db": 8,
    "vga_db": 8,
    "amp_enable": false,
    "capture_mode": "duration",
    "duration_s": 1.0,
    "num_samples": null,
    "__comment_capture_mode": "duration|samples. Use one.",
    "output_filename": "rx_1.iq"
  },
  "rx_2": {
    "enabled": true,
    "lna_db": 8,
    "vga_db": 8,
    "amp_enable": false,
    "capture_mode": "duration",
    "duration_s": 1.0,
    "num_samples": null,
    "output_filename": "rx_2.iq"
  },
  "synchronization": {
    "start_order": [
      "rx_1",
      "rx_2",
      "tx"
    ],
    "__comment_start_order": "If you need deterministic timing, start RX captures first, then TX.",
    "startup_delay_s": 0.05,
    "shutdown_order": [
      "tx",
      "rx_1",
      "rx_2"
    ],
    "shutdown_delay_s": 0.0
  },
  "validation": {
    "require_hackrf_tools": [
      "hackrf_info",
      "hackrf_transfer"
    ],
    "__comment_require_hackrf_tools": "Tools that must exist in PATH before starting a session.",
    "require_devices_present": true,
    "require_unique_serials": true
  },
  "logging": {
    "print_config_on_start": true,
    "print_commands": true,
    "save_effective_config_json": true,
    "__comment_save_effective_config_json": "If True, write the resolved config (with defaults applied) into each session folder."
  }
}
